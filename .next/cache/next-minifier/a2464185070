{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{\"4PMO\":function(a,n,e){\"use strict\";e.r(n);var r=e(\"ln6h\"),t=e.n(r),s=e(\"O40h\"),o=e(\"Chh1\"),u=e(\"tsZx\"),i=e(\"mDt/\"),d=e(\"rRlx\"),c=e(\"oMaz\"),l=e(\"5niy\"),w=e(\"q1tI\"),p=e.n(w),h=e(\"IIls\"),b=e(\"XwJz\"),f=e(\"sZPt\"),m=e(\"Kr3e\"),P=e(\"jjgO\"),O=e(\"EEOF\"),g=p.a.createElement;n.default=Object(l.a)(function(a){var n=a.navigation,e=Object(l.b)({new1:\"\",new2:\"\",old:\"\",loading:!1});return g(i.a,null,g(c.a,{navigation:n,title:\"Ubah Password\"}),g(o.a,null,g(d.a,{type:\"password\",label:\"Password Lama\",value:e.old,setValue:function(a){return e.old=a}}),g(d.a,{type:\"password\",label:\"Password Baru\",value:e.new1,setValue:function(a){return e.new1=a}}),g(d.a,{type:\"password\",label:\"Ulangi Password Baru\",value:e.new2,setValue:function(a){return e.new2=a}}),e.loading?g(h.a,null,\"Loading...\"):g(u.a,{onPress:Object(s.a)(t.a.mark(function a(){var n,r,s,o;return t.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=\"web\"===b.a.OS?alert:f.a.alert,a.next=3,Object(m.a)();case 3:if(r=a.sent,e.new1&&e.new2&&e.old){a.next=7;break}return n(\"Mohon isi password dengan lengkap\"),a.abrupt(\"return\",!1);case 7:if(e.new1===e.new2){a.next=10;break}return n(\"Password tidak sama \"),a.abrupt(\"return\",!1);case 10:return e.loading=!0,a.next=13,fetch(\"https://backend.cap.edumatis.id\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"X-Hasura-Username\":r.murid.nsa,\"X-Hasura-Password\":e.old,\"X-Hasura-Cid\":r.murid.sekolah_id+\"\"}});case 13:return s=a.sent,a.next=16,s.json();case 16:if(o=a.sent,console.log(o,{\"Content-Type\":\"application/json\",\"X-Hasura-Username\":r.murid.nsa,\"X-Hasura-Password\":e.old,\"X-Hasura-Cid\":r.murid.sekolah_id+\"\"}),\"anonymous\"===o[\"X-Hasura-Role\"]){a.next=26;break}return a.next=21,Object(P.a)(\"murid\",{id:r.murid.id,password:e.new1});case 21:return a.next=23,Object(O.a)(r.murid.id);case 23:n(\"Password berhasil di-ubah!\"),a.next=27;break;case 26:n(\"Password lama salah\");case 27:e.loading=!1;case 28:case\"end\":return a.stop()}},a)}))},\"Ubah Password\")))})},EEOF:function(a,n,e){\"use strict\";e.d(n,\"a\",function(){return d});var r=e(\"ln6h\"),t=e.n(r),s=e(\"9Jkg\"),o=e.n(s),u=e(\"O40h\"),i=e(\"THla\"),d=function(){var a=Object(u.a)(t.a.mark(function a(n){return t.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(i.a.url,{method:\"POST\",body:o()({query:\"{\\n          session(limit:1) {\\n            id\\n          }\\n        }\"}),headers:{\"Content-Type\":\"application/json\",\"X-Hasura-ChangePass-Uid\":n}});case 2:a.sent;case 3:case\"end\":return a.stop()}},a)}));return function(n){return a.apply(this,arguments)}}()},sZPt:function(a,n,e){\"use strict\";var r=function(){function a(){}return a.alert=function(){},a}();n.a=r},u01w:function(a,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/app/screens/siswa/UbahPassword\",function(){return e(\"4PMO\")}])}},[[\"u01w\",1,0]]]);"}