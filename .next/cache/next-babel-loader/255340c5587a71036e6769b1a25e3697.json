{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport StackNav from \"../../../../../libs/nav/StackNav\";\nimport UIBody from \"../../../../../libs/ui/UIBody\";\nimport UIButton from \"../../../../../libs/ui/UIButton\";\nimport UIContainer from \"../../../../../libs/ui/UIContainer\";\nimport UIFieldText from \"../../../../../libs/ui/UIFieldText\";\nimport UIHead from \"../../../../../libs/ui/UIHead\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { View } from \"react-native-web\";\nimport MuridDetailProfil from \"./MuridDetailProfil\";\nimport MuridDetailSide from \"./MuridDetailSide\";\nimport updateRecord from \"../../../../../libs/queries/crud/updateRecord\";\nimport createRecord from \"../../../../../libs/queries/crud/createRecord\";\nimport UIRow from \"../../../../../libs/ui/UIRow\";\nimport UICol from \"../../../../../libs/ui/UICol\";\nimport UIFieldSelectNative from \"../../../../../libs/ui/UIFieldSelectNative\";\nimport { hashPassword } from \"../../../../../libs/queries/user/hashPassword\";\nexport async function saveUser(form, kelas_id) {\n  if (form.id) {\n    await updateRecord(\"murid\", form);\n  } else {\n    form.id = await createRecord(\"murid\", form);\n\n    if (form.id > 0 && kelas_id) {\n      await createRecord(\"kelas_murid\", {\n        kelas_id: kelas_id,\n        murid_id: form.id,\n        is_active: \"y\"\n      });\n    }\n  }\n\n  if (!!form.password) {\n    await hashPassword(form.id);\n  }\n}\nconst MuridSistem = observer(({\n  navigation,\n  parentNavigation\n}) => {\n  const data = useObservable({\n    loading: true,\n    form: (parentNavigation || {\n      getParam: () => ({})\n    }).getParam(\"item\"),\n    kelas: (parentNavigation || {\n      getParam: () => ({})\n    }).getParam(\"kelas\")\n  });\n  return __jsx(UIContainer, null, __jsx(UIHead, {\n    navigation: navigation,\n    title: data.form.id ? `Detail Siswa #${data.form.id}` : `Buat Siswa Baru`,\n    onBack: () => {\n      parentNavigation.goBack();\n    }\n  }, __jsx(UIButton, {\n    onPress: async () => {\n      const form = _objectSpread({}, data.form);\n\n      await saveUser(form, data.kelas.id);\n      parentNavigation.goBack();\n    }\n  }, \"Simpan\")), __jsx(View, {\n    style: {\n      flexDirection: \"row\",\n      flex: 1,\n      borderTopColor: \"#ccc\",\n      borderTopWidth: 1\n    }\n  }, __jsx(MuridDetailSide, {\n    navigation: navigation,\n    form: data.form\n  }), __jsx(UIBody, null, __jsx(UIRow, null, __jsx(UICol, {\n    size: 6,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"NSA (Username)\",\n    setValue: value => {\n      data.form.nsa = value;\n    },\n    value: data.form.nsa\n  })), __jsx(UICol, {\n    size: 6,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"NISN\",\n    setValue: value => {\n      data.form.nisn = value;\n    },\n    value: data.form.nisn\n  }))), __jsx(UIFieldText, {\n    label: \"Nama Lengkap\",\n    setValue: value => {\n      data.form.nama_murid = value;\n    },\n    value: data.form.nama_murid\n  }), __jsx(UIRow, null, __jsx(UICol, {\n    size: 4,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"E-Mail\",\n    setValue: value => {\n      data.form.email = value;\n    },\n    value: data.form.email || \"\"\n  }))), __jsx(UIRow, null, __jsx(UICol, {\n    size: 4,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldSelectNative, {\n    label: \"Status\",\n    items: [{\n      value: \"y\",\n      label: \"Aktif\"\n    }, {\n      value: \"n\",\n      label: \"Non-Aktif\"\n    }],\n    setValue: value => {\n      data.form.is_active = value;\n    },\n    value: data.form.is_active\n  }))), __jsx(UIRow, null, __jsx(UICol, {\n    size: 4,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"Ubah Password\",\n    type: \"password\",\n    setValue: value => {\n      data.form.password = value;\n    },\n    value: data.form.password || \"\"\n  }))))));\n});\nexport default StackNav({\n  MuridSistem: {\n    screen: MuridSistem\n  },\n  MuridProfil: {\n    screen: MuridDetailProfil\n  }\n});","map":null,"metadata":{},"sourceType":"module"}