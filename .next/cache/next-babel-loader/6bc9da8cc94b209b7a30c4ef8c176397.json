{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar _jsxFileName = \"/Users/riz/Documents/edumatis-web/pages/app/screens/admin/Transaksi/Transaksi.tsx\";\nvar __jsx = React.createElement;\nimport rawQuery from \"../../../../../libs/queries/crud/rawQuery\";\nimport UIBody from \"../../../../../libs/ui/UIBody\";\nimport UIButton from \"../../../../../libs/ui/UIButton\";\nimport UIContainer from \"../../../../../libs/ui/UIContainer\";\nimport UIHead from \"../../../../../libs/ui/UIHead\";\nimport UIList from \"../../../../../libs/ui/UIList\";\nimport UIListItem from \"../../../../../libs/ui/UIListItem\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { Text, View } from \"react-native-web\";\nimport StackNav from \"../../../../../libs/nav/StackNav\";\nimport TransaksiDetail from \"./TransaksiDetail\";\n\nconst dayjs = require(\"dayjs\");\n\nimport RelativeTime from \"dayjs/plugin/relativeTime\";\nimport get from \"lodash.get\";\ndayjs.extend(RelativeTime);\nconst Transaksi = observer(({\n  navigation\n}) => {\n  const data = useObservable({\n    list: [],\n    loading: true\n  });\n  useEffect(() => {\n    let fetch = async () => {\n      const result = await rawQuery(`{\n        transaksi(order_by: {tstamp: asc}) {\n          id\n          status\n          tstamp\n          amount: detail(path:\"amount\")\n          detail(path:\"status\")\n          paid(path:\"status\")\n          murid {\n            id\n            nama_murid\n            nsa\n            kelas_murids {\n              kelas {\n                nama_kelas\n              }\n            }\n          }\n          kewajiban {\n            nama_kewajiban\n          }\n        }\n      }\n      `);\n      data.list = result.transaksi;\n      data.loading = false;\n    };\n\n    fetch();\n  }, []);\n  return __jsx(UIContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, __jsx(UIHead, {\n    navigation: navigation,\n    title: \"Transaksi\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, __jsx(UIButton, {\n    size: \"small\",\n    onPress: () => {\n      navigation.navigate(\"TransaksiDetail\", {\n        item: {\n          nominal: 100000,\n          kelas: {}\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"+ Transaksi Baru\")), __jsx(UIBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, __jsx(UIList, {\n    data: data.list,\n    loading: data.loading,\n    render: list => {\n      const item = list.item;\n      const tgl = dayjs(item.tstamp);\n      const fromday = tgl.fromNow();\n      const kelas = get(item, \"murid.kelas_murids[0].kelas.nama_kelas\") || \"Semua Kelas\";\n\n      const nominal = _parseInt(item.amount || item.nominal);\n\n      let status = (item.paid || item.detail || item.status).toLowerCase();\n      if (status === \"paid\") status = \"success\";\n      return __jsx(UIListItem, {\n        onPress: () => {\n          navigation.navigate(\"TransaksiDetail\", {\n            item: item\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, __jsx(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, __jsx(Text, {\n        style: {\n          fontSize: 15,\n          fontWeight: \"bold\",\n          color: \"#555\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"#\", item.id, \" \", item.kewajiban.nama_kewajiban, \" - Rp\", \" \", (nominal || 0).toLocaleString(), \" \", \"(\", status, \")\"), __jsx(Text, {\n        style: {\n          fontSize: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, item.murid.nama_murid, \" - \", kelas)), __jsx(View, {\n        style: {\n          alignItems: \"flex-end\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, __jsx(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, fromday), __jsx(Text, {\n        style: {\n          fontSize: 12\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, tgl.format(\"DD MMM YYYY - hh.mm\"))));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })));\n});\nexport default StackNav({\n  Transaksi: {\n    screen: Transaksi\n  },\n  TransaksiDetail: {\n    screen: TransaksiDetail\n  }\n});","map":{"version":3,"sources":["/Users/riz/Documents/edumatis-web/pages/app/screens/admin/Transaksi/Transaksi.tsx"],"names":["rawQuery","UIBody","UIButton","UIContainer","UIHead","UIList","UIListItem","observer","useObservable","React","useEffect","Text","View","StackNav","TransaksiDetail","dayjs","require","RelativeTime","get","extend","Transaksi","navigation","data","list","loading","fetch","result","transaksi","navigate","item","nominal","kelas","tgl","tstamp","fromday","fromNow","amount","status","paid","detail","toLowerCase","fontSize","fontWeight","color","id","kewajiban","nama_kewajiban","toLocaleString","murid","nama_murid","alignItems","format","screen"],"mappings":";;;AAAA,OAAOA,QAAP;AACA,OAAOC,MAAP;AACA,OAAOC,QAAP;AACA,OAAOC,WAAP;AACA,OAAOC,MAAP;AACA,OAAOC,MAAP;AACA,OAAOC,UAAP;AACA,SAASC,QAAT,EAAmBC,aAAnB,QAAwC,iBAAxC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,IAAf;AACA,OAAOC,QAAP;AACA,OAAOC,eAAP;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AAEAH,KAAK,CAACI,MAAN,CAAaF,YAAb;AACA,MAAMG,SAAS,GAAGb,QAAQ,CAAC,CAAC;AAAEc,EAAAA;AAAF,CAAD,KAAyB;AAClD,QAAMC,IAAI,GAAGd,aAAa,CAAC;AACzBe,IAAAA,IAAI,EAAE,EADmB;AAEzBC,IAAAA,OAAO,EAAE;AAFgB,GAAD,CAA1B;AAIAd,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,KAAK,GAAG,YAAY;AACtB,YAAMC,MAAM,GAAG,MAAM1B,QAAQ,CAAE;;;;;;;;;;;;;;;;;;;;;;;OAAF,CAA7B;AAwBAsB,MAAAA,IAAI,CAACC,IAAL,GAAYG,MAAM,CAACC,SAAnB;AACAL,MAAAA,IAAI,CAACE,OAAL,GAAe,KAAf;AACD,KA3BD;;AA4BAC,IAAAA,KAAK;AACN,GA9BQ,EA8BN,EA9BM,CAAT;AAgCA,SACE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,UAAU,EAAEJ,UAApB;AAAgC,IAAA,KAAK,EAAC,WAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,QAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,OAAO,EAAE,MAAM;AACbA,MAAAA,UAAU,CAACO,QAAX,CAAoB,iBAApB,EAAuC;AACrCC,QAAAA,IAAI,EAAE;AACJC,UAAAA,OAAO,EAAE,MADL;AAEJC,UAAAA,KAAK,EAAE;AAFH;AAD+B,OAAvC;AAMD,KATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CADF,EAgBE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,IAAI,EAAET,IAAI,CAACC,IADb;AAEE,IAAA,OAAO,EAAED,IAAI,CAACE,OAFhB;AAGE,IAAA,MAAM,EAAGD,IAAD,IAAe;AACrB,YAAMM,IAAI,GAAGN,IAAI,CAACM,IAAlB;AAEA,YAAMG,GAAG,GAAGjB,KAAK,CAACc,IAAI,CAACI,MAAN,CAAjB;AACA,YAAMC,OAAO,GAAGF,GAAG,CAACG,OAAJ,EAAhB;AACA,YAAMJ,KAAK,GACTb,GAAG,CAACW,IAAD,EAAO,wCAAP,CAAH,IACA,aAFF;;AAGA,YAAMC,OAAO,GAAG,UAASD,IAAI,CAACO,MAAL,IAAeP,IAAI,CAACC,OAA7B,CAAhB;;AACA,UAAIO,MAAM,GAAG,CAACR,IAAI,CAACS,IAAL,IAAaT,IAAI,CAACU,MAAlB,IAA4BV,IAAI,CAACQ,MAAlC,EAA0CG,WAA1C,EAAb;AACA,UAAIH,MAAM,KAAK,MAAf,EAAuBA,MAAM,GAAG,SAAT;AAEvB,aACE,MAAC,UAAD;AACE,QAAA,OAAO,EAAE,MAAM;AACbhB,UAAAA,UAAU,CAACO,QAAX,CAAoB,iBAApB,EAAuC;AACrCC,YAAAA,IAAI,EAAEA;AAD+B,WAAvC;AAGD,SALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,IAAD;AACE,QAAA,KAAK,EAAE;AAAEY,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,UAAU,EAAE,MAA5B;AAAoCC,UAAAA,KAAK,EAAE;AAA3C,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAGId,IAAI,CAACe,EAHT,OAGcf,IAAI,CAACgB,SAAL,CAAeC,cAH7B,WAGkD,GAHlD,EAIG,CAAChB,OAAO,IAAI,CAAZ,EAAeiB,cAAf,EAJH,EAIoC,GAJpC,OAKIV,MALJ,MADF,EAQE,MAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEI,UAAAA,QAAQ,EAAE;AAAZ,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGZ,IAAI,CAACmB,KAAL,CAAWC,UADd,SAC6BlB,KAD7B,CARF,CAPF,EAmBE,MAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEmB,UAAAA,UAAU,EAAE;AAAd,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOhB,OAAP,CADF,EAEE,MAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEO,UAAAA,QAAQ,EAAE;AAAZ,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGT,GAAG,CAACmB,MAAJ,CAAW,qBAAX,CADH,CAFF,CAnBF,CADF;AA4BD,KA3CH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAhBF,CADF;AAkED,CAvGyB,CAA1B;AAyGA,eAAetC,QAAQ,CAAC;AACtBO,EAAAA,SAAS,EAAE;AAAEgC,IAAAA,MAAM,EAAEhC;AAAV,GADW;AAEtBN,EAAAA,eAAe,EAAE;AAAEsC,IAAAA,MAAM,EAAEtC;AAAV;AAFK,CAAD,CAAvB","sourcesContent":["import rawQuery from \"@app/libs/queries/crud/rawQuery\";\nimport UIBody from \"@app/libs/ui/UIBody\";\nimport UIButton from \"@app/libs/ui/UIButton\";\nimport UIContainer from \"@app/libs/ui/UIContainer\";\nimport UIHead from \"@app/libs/ui/UIHead\";\nimport UIList from \"@app/libs/ui/UIList\";\nimport UIListItem from \"@app/libs/ui/UIListItem\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { Text, View } from \"react-native\";\nimport StackNav from \"@app/libs/nav/StackNav\";\nimport TransaksiDetail from \"./TransaksiDetail\";\nconst dayjs = require(\"dayjs\");\nimport RelativeTime from \"dayjs/plugin/relativeTime\";\nimport get from \"lodash.get\";\n\ndayjs.extend(RelativeTime);\nconst Transaksi = observer(({ navigation }: any) => {\n  const data = useObservable({\n    list: [],\n    loading: true\n  });\n  useEffect(() => {\n    let fetch = async () => {\n      const result = await rawQuery(`{\n        transaksi(order_by: {tstamp: asc}) {\n          id\n          status\n          tstamp\n          amount: detail(path:\"amount\")\n          detail(path:\"status\")\n          paid(path:\"status\")\n          murid {\n            id\n            nama_murid\n            nsa\n            kelas_murids {\n              kelas {\n                nama_kelas\n              }\n            }\n          }\n          kewajiban {\n            nama_kewajiban\n          }\n        }\n      }\n      `);\n      data.list = result.transaksi;\n      data.loading = false;\n    };\n    fetch();\n  }, []);\n\n  return (\n    <UIContainer>\n      <UIHead navigation={navigation} title=\"Transaksi\">\n        <UIButton\n          size=\"small\"\n          onPress={() => {\n            navigation.navigate(\"TransaksiDetail\", {\n              item: {\n                nominal: 100000,\n                kelas: {}\n              }\n            });\n          }}\n        >\n          + Transaksi Baru\n        </UIButton>\n      </UIHead>\n      <UIBody>\n        <UIList\n          data={data.list}\n          loading={data.loading}\n          render={(list: any) => {\n            const item = list.item;\n\n            const tgl = dayjs(item.tstamp);\n            const fromday = tgl.fromNow();\n            const kelas =\n              get(item, \"murid.kelas_murids[0].kelas.nama_kelas\") ||\n              \"Semua Kelas\";\n            const nominal = parseInt(item.amount || item.nominal);\n            let status = (item.paid || item.detail || item.status).toLowerCase();\n            if (status === \"paid\") status = \"success\";\n            \n            return (\n              <UIListItem\n                onPress={() => {\n                  navigation.navigate(\"TransaksiDetail\", {\n                    item: item\n                  });\n                }}\n              >\n                <View>\n                  <Text\n                    style={{ fontSize: 15, fontWeight: \"bold\", color: \"#555\" }}\n                  >\n                    #{item.id} {item.kewajiban.nama_kewajiban} - Rp{\" \"}\n                    {(nominal || 0).toLocaleString()}{\" \"}\n                    ({status})\n                  </Text>\n                  <Text style={{ fontSize: 14 }}>\n                    {item.murid.nama_murid} - {kelas}\n                  </Text>\n                </View>\n                <View style={{ alignItems: \"flex-end\" }}>\n                  <Text>{fromday}</Text>\n                  <Text style={{ fontSize: 12 }}>\n                    {tgl.format(\"DD MMM YYYY - hh.mm\")}\n                  </Text>\n                </View>\n              </UIListItem>\n            );\n          }}\n        />\n      </UIBody>\n    </UIContainer>\n  );\n});\n\nexport default StackNav({\n  Transaksi: { screen: Transaksi },\n  TransaksiDetail: { screen: TransaksiDetail }\n});\n"]},"metadata":{},"sourceType":"module"}