{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/riz/Documents/edumatis-web/pages/app/screens/admin/Kelas/KelasDetail.tsx\";\nvar __jsx = React.createElement;\nimport createRecord from \"../../../../../libs/queries/crud/createRecord\";\nimport rawQuery from \"../../../../../libs/queries/crud/rawQuery\";\nimport updateRecord from \"../../../../../libs/queries/crud/updateRecord\";\nimport UIBody from \"../../../../../libs/ui/UIBody\";\nimport UIButton from \"../../../../../libs/ui/UIButton\";\nimport UIContainer from \"../../../../../libs/ui/UIContainer\";\nimport UIFieldText from \"../../../../../libs/ui/UIFieldText\";\nimport UIHead from \"../../../../../libs/ui/UIHead\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport MuridList from \"./MuridList\";\nexport default observer(({\n  navigation\n}) => {\n  const data = useObservable({\n    loading: true,\n    murids: [],\n    form: (navigation || {\n      getParam: () => ({})\n    }).getParam(\"item\")\n  });\n  useEffect(() => {\n    const fetch = async function () {\n      let res = await rawQuery(`{\n        murid(where: {kelas_murids: {kelas_id: {_eq: ${data.form.id}}}}) {\n          id\n          email\n          data\n          is_active\n          nisn\n          no_akta_kelahiran\n          nsa\n          tgl_lahir\n          updated_at\n          nama_murid\n        }\n      }\n      `);\n      data.murids = res.murid;\n      data.loading = false;\n    };\n\n    fetch();\n  }, []);\n  return __jsx(UIContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, __jsx(UIHead, {\n    navigation: navigation,\n    title: ` Kelas ` + (data.form.id ? `#${data.form.id}` : `Baru`),\n    onBack: () => {\n      navigation.goBack();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, __jsx(UIButton, {\n    onPress: async () => {\n      const form = _objectSpread({}, data.form);\n\n      delete form.kelas_murids_aggregate;\n\n      if (form.id) {\n        await updateRecord(\"kelas\", form);\n      } else {\n        await createRecord(\"kelas\", form);\n      }\n\n      navigation.goBack();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Simpan\")), __jsx(UIBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, __jsx(UIFieldText, {\n    label: \"Nama Kelas\",\n    setValue: value => {\n      data.form.nama_kelas = value;\n    },\n    value: data.form.nama_kelas || \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), __jsx(MuridList, {\n    kelas: data.form,\n    list: data.murids,\n    loading: data.loading,\n    navigation: navigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  })));\n});","map":{"version":3,"sources":["/Users/riz/Documents/edumatis-web/pages/app/screens/admin/Kelas/KelasDetail.tsx"],"names":["createRecord","rawQuery","updateRecord","UIBody","UIButton","UIContainer","UIFieldText","UIHead","observer","useObservable","React","useEffect","MuridList","navigation","data","loading","murids","form","getParam","fetch","res","id","murid","goBack","kelas_murids_aggregate","value","nama_kelas"],"mappings":";;;AAAA,OAAOA,YAAP;AACA,OAAOC,QAAP;AACA,OAAOC,YAAP;AACA,OAAOC,MAAP;AACA,OAAOC,QAAP;AACA,OAAOC,WAAP;AACA,OAAOC,WAAP;AACA,OAAOC,MAAP;AACA,SAASC,QAAT,EAAmBC,aAAnB,QAAwC,iBAAxC;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP;AAEA,eAAeJ,QAAQ,CAAC,CAAC;AAAEK,EAAAA;AAAF,CAAD,KAAyB;AAC/C,QAAMC,IAAI,GAAGL,aAAa,CAAC;AACzBM,IAAAA,OAAO,EAAE,IADgB;AAEzBC,IAAAA,MAAM,EAAE,EAFiB;AAGzBC,IAAAA,IAAI,EAAE,CAACJ,UAAU,IAAI;AAAEK,MAAAA,QAAQ,EAAE,OAAO,EAAP;AAAZ,KAAf,EAAwCA,QAAxC,CAAiD,MAAjD;AAHmB,GAAD,CAA1B;AAMAP,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMQ,KAAK,GAAG,kBAAiB;AAC7B,UAAIC,GAAG,GAAG,MAAMnB,QAAQ,CAAE;uDACuBa,IAAI,CAACG,IAAL,CAAUI,EAAG;;;;;;;;;;;;;OADtC,CAAxB;AAeAP,MAAAA,IAAI,CAACE,MAAL,GAAcI,GAAG,CAACE,KAAlB;AACAR,MAAAA,IAAI,CAACC,OAAL,GAAe,KAAf;AACD,KAlBD;;AAmBAI,IAAAA,KAAK;AACN,GArBQ,EAqBN,EArBM,CAAT;AAuBA,SACE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,UAAU,EAAEN,UADd;AAEE,IAAA,KAAK,EAAG,SAAD,IAAaC,IAAI,CAACG,IAAL,CAAUI,EAAV,GAAgB,IAAGP,IAAI,CAACG,IAAL,CAAUI,EAAG,EAAhC,GAAqC,MAAlD,CAFT;AAGE,IAAA,MAAM,EAAE,MAAM;AACZR,MAAAA,UAAU,CAACU,MAAX;AACD,KALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,QAAD;AACE,IAAA,OAAO,EAAE,YAAY;AACnB,YAAMN,IAAI,qBAAQH,IAAI,CAACG,IAAb,CAAV;;AACA,aAAOA,IAAI,CAACO,sBAAZ;;AACA,UAAIP,IAAI,CAACI,EAAT,EAAa;AACX,cAAMnB,YAAY,CAAC,OAAD,EAAUe,IAAV,CAAlB;AACD,OAFD,MAEO;AACL,cAAMjB,YAAY,CAAC,OAAD,EAAUiB,IAAV,CAAlB;AACD;;AACDJ,MAAAA,UAAU,CAACU,MAAX;AACD,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,CADF,EAuBE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AACE,IAAA,KAAK,EAAC,YADR;AAEE,IAAA,QAAQ,EAAGE,KAAD,IAAgB;AACxBX,MAAAA,IAAI,CAACG,IAAL,CAAUS,UAAV,GAAuBD,KAAvB;AACD,KAJH;AAKE,IAAA,KAAK,EAAEX,IAAI,CAACG,IAAL,CAAUS,UAAV,IAAwB,EALjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE,MAAC,SAAD;AACE,IAAA,KAAK,EAAEZ,IAAI,CAACG,IADd;AAEE,IAAA,IAAI,EAAEH,IAAI,CAACE,MAFb;AAGE,IAAA,OAAO,EAAEF,IAAI,CAACC,OAHhB;AAIE,IAAA,UAAU,EAAEF,UAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CAvBF,CADF;AAyCD,CAvEsB,CAAvB","sourcesContent":["import createRecord from \"@app/libs/queries/crud/createRecord\";\nimport rawQuery from \"@app/libs/queries/crud/rawQuery\";\nimport updateRecord from \"@app/libs/queries/crud/updateRecord\";\nimport UIBody from \"@app/libs/ui/UIBody\";\nimport UIButton from \"@app/libs/ui/UIButton\";\nimport UIContainer from \"@app/libs/ui/UIContainer\";\nimport UIFieldText from \"@app/libs/ui/UIFieldText\";\nimport UIHead from \"@app/libs/ui/UIHead\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport MuridList from \"./MuridList\";\n\nexport default observer(({ navigation }: any) => {\n  const data = useObservable({\n    loading: true,\n    murids: [],\n    form: (navigation || { getParam: () => ({})}).getParam(\"item\")\n  });\n\n  useEffect(() => {\n    const fetch = async function() {\n      let res = await rawQuery(`{\n        murid(where: {kelas_murids: {kelas_id: {_eq: ${data.form.id}}}}) {\n          id\n          email\n          data\n          is_active\n          nisn\n          no_akta_kelahiran\n          nsa\n          tgl_lahir\n          updated_at\n          nama_murid\n        }\n      }\n      `);\n      data.murids = res.murid;\n      data.loading = false;\n    };\n    fetch();\n  }, []);\n\n  return (\n    <UIContainer>\n      <UIHead\n        navigation={navigation}\n        title={` Kelas ` + (data.form.id ? `#${data.form.id}` : `Baru`)}\n        onBack={() => {\n          navigation.goBack();\n        }}\n      >\n        <UIButton\n          onPress={async () => {\n            const form = { ...data.form };\n            delete form.kelas_murids_aggregate;\n            if (form.id) {\n              await updateRecord(\"kelas\", form);\n            } else {\n              await createRecord(\"kelas\", form);\n            }\n            navigation.goBack();\n          }}\n        >\n          Simpan\n        </UIButton>\n      </UIHead>\n      <UIBody>\n        <UIFieldText\n          label=\"Nama Kelas\"\n          setValue={(value: any) => {\n            data.form.nama_kelas = value;\n          }}\n          value={data.form.nama_kelas || \"\"}\n        />\n        <MuridList\n          kelas={data.form}\n          list={data.murids}\n          loading={data.loading}\n          navigation={navigation}\n        />\n      </UIBody>\n    </UIContainer>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}