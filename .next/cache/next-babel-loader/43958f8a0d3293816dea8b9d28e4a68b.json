{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport StackNav from \"../../../../../libs/nav/StackNav\";\nimport UIBody from \"../../../../../libs/ui/UIBody\";\nimport UIButton from \"../../../../../libs/ui/UIButton\";\nimport UIContainer from \"../../../../../libs/ui/UIContainer\";\nimport UIFieldText from \"../../../../../libs/ui/UIFieldText\";\nimport UIHead from \"../../../../../libs/ui/UIHead\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { View } from \"react-native-web\";\nimport MuridDetailProfil from \"./MuridDetailProfil\";\nimport MuridDetailSide from \"./MuridDetailSide\";\nimport updateRecord from \"../../../../../libs/queries/crud/updateRecord\";\nimport createRecord from \"../../../../../libs/queries/crud/createRecord\";\nimport UIRow from \"../../../../../libs/ui/UIRow\";\nimport UICol from \"../../../../../libs/ui/UICol\";\nimport UIFieldSelectNative from \"../../../../../libs/ui/UIFieldSelectNative\";\nimport { hashPassword } from \"../../../../../libs/queries/user/hashPassword\";\nexport function saveUser(_x, _x2) {\n  return _saveUser.apply(this, arguments);\n}\n\nfunction _saveUser() {\n  _saveUser = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(form, kelas_id) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!form.id) {\n              _context2.next = 5;\n              break;\n            }\n\n            _context2.next = 3;\n            return updateRecord(\"murid\", form);\n\n          case 3:\n            _context2.next = 11;\n            break;\n\n          case 5:\n            _context2.next = 7;\n            return createRecord(\"murid\", form);\n\n          case 7:\n            form.id = _context2.sent;\n\n            if (!(form.id > 0 && kelas_id)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 11;\n            return createRecord(\"kelas_murid\", {\n              kelas_id: kelas_id,\n              murid_id: form.id,\n              is_active: \"y\"\n            });\n\n          case 11:\n            if (!form.password) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 14;\n            return hashPassword(form.id);\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _saveUser.apply(this, arguments);\n}\n\nvar MuridSistem = observer(function (_ref) {\n  var navigation = _ref.navigation,\n      parentNavigation = _ref.parentNavigation;\n  var data = useObservable({\n    loading: true,\n    form: (parentNavigation || {\n      getParam: function getParam() {\n        return {};\n      }\n    }).getParam(\"item\"),\n    kelas: (parentNavigation || {\n      getParam: function getParam() {\n        return {};\n      }\n    }).getParam(\"kelas\")\n  });\n  return __jsx(UIContainer, null, __jsx(UIHead, {\n    navigation: navigation,\n    title: data.form.id ? \"Detail Siswa #\".concat(data.form.id) : \"Buat Siswa Baru\",\n    onBack: function onBack() {\n      parentNavigation.goBack();\n    }\n  }, __jsx(UIButton, {\n    onPress:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var form;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              form = _objectSpread({}, data.form);\n              _context.next = 3;\n              return saveUser(form, data.kelas.id);\n\n            case 3:\n              parentNavigation.goBack();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))\n  }, \"Simpan\")), __jsx(View, {\n    style: {\n      flexDirection: \"row\",\n      flex: 1,\n      borderTopColor: \"#ccc\",\n      borderTopWidth: 1\n    }\n  }, __jsx(MuridDetailSide, {\n    navigation: navigation,\n    form: data.form\n  }), __jsx(UIBody, null, __jsx(UIRow, null, __jsx(UICol, {\n    size: 6,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"NSA (Username)\",\n    setValue: function setValue(value) {\n      data.form.nsa = value;\n    },\n    value: data.form.nsa\n  })), __jsx(UICol, {\n    size: 6,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"NISN\",\n    setValue: function setValue(value) {\n      data.form.nisn = value;\n    },\n    value: data.form.nisn\n  }))), __jsx(UIFieldText, {\n    label: \"Nama Lengkap\",\n    setValue: function setValue(value) {\n      data.form.nama_murid = value;\n    },\n    value: data.form.nama_murid\n  }), __jsx(UIRow, null, __jsx(UICol, {\n    size: 4,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"E-Mail\",\n    setValue: function setValue(value) {\n      data.form.email = value;\n    },\n    value: data.form.email || \"\"\n  }))), __jsx(UIRow, null, __jsx(UICol, {\n    size: 4,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldSelectNative, {\n    label: \"Status\",\n    items: [{\n      value: \"y\",\n      label: \"Aktif\"\n    }, {\n      value: \"n\",\n      label: \"Non-Aktif\"\n    }],\n    setValue: function setValue(value) {\n      data.form.is_active = value;\n    },\n    value: data.form.is_active\n  }))), __jsx(UIRow, null, __jsx(UICol, {\n    size: 4,\n    sizexs: 12,\n    sizesm: 12,\n    sizemd: 12\n  }, __jsx(UIFieldText, {\n    label: \"Ubah Password\",\n    type: \"password\",\n    setValue: function setValue(value) {\n      data.form.password = value;\n    },\n    value: data.form.password || \"\"\n  }))))));\n});\nexport default StackNav({\n  MuridSistem: {\n    screen: MuridSistem\n  },\n  MuridProfil: {\n    screen: MuridDetailProfil\n  }\n});","map":null,"metadata":{},"sourceType":"module"}