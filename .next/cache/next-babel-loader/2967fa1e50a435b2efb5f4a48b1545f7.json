{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport UIButton from \"../../../../../libs/ui/UIButton\";\nimport UIImage from \"../../../../../libs/ui/UIImage\";\nimport UIList from \"../../../../../libs/ui/UIList\";\nimport UIListItem from \"../../../../../libs/ui/UIListItem\";\nimport { observer, useObservable } from 'mobx-react-lite';\nimport React from 'react';\nimport { Text, View, TouchableOpacity } from \"react-native-web\";\nimport { toJS } from 'mobx';\nexport default observer(function (data) {\n  var meta = useObservable({\n    checked: []\n  });\n  if (!data.list) return null;\n  return __jsx(View, {\n    style: {\n      paddingHorizontal: 10\n    }\n  }, __jsx(View, {\n    style: {\n      borderBottomColor: '#ddd',\n      borderBottomWidth: 2,\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: 10,\n      justifyContent: 'space-between'\n    }\n  }, __jsx(Text, {\n    style: {\n      color: '#999'\n    }\n  }, \"Total Murid: \", data.list.length, meta.checked.length > 0 && \" \\u2022 Murid Terpilih: \".concat(meta.checked.length)), __jsx(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center'\n    }\n  }, false && meta.checked.length > 0 && __jsx(UIButton, {\n    size: \"small\",\n    fill: \"outline\",\n    style: {\n      margin: 0,\n      marginLeft: 8\n    },\n    labelStyle: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingTop: 2,\n      paddingBottom: 2,\n      paddingHorizontal: 0\n    }\n  }, __jsx(UIImage, {\n    source: require(\"../../../imgs/move.png\"),\n    style: {\n      width: 18,\n      height: 18,\n      marginLeft: 8\n    }\n  }), \"Pindah Ke Kelas Lain\"), __jsx(UIButton, {\n    size: \"small\",\n    fill: \"outline\",\n    style: {\n      margin: 0,\n      marginLeft: 8\n    },\n    labelStyle: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingTop: 2,\n      paddingBottom: 2,\n      paddingHorizontal: 0\n    },\n    onPress: function onPress() {\n      var hasDetail = false;\n      var list = toJS(data.list);\n      list.forEach(function (item) {\n        if (item.data && item.data.nik) {\n          hasDetail = true;\n        }\n      });\n      var header = [];\n      var finalList = [];\n      header.push('nisn');\n      header.push('nsa');\n      header.push('nama_lengkap');\n      header.push('tgl_lahir');\n\n      if (hasDetail) {\n        list.forEach(function (item) {\n          if (item.data && item.data.nik) {\n            for (var _i in item.data) {\n              header.push(_i);\n            }\n          }\n        });\n      }\n\n      finalList.push(header);\n      list.forEach(function (item) {\n        var row = [];\n        row.push(item['nisn']);\n        row.push(item['nsa']);\n        row.push(item['nama_murid']);\n        row.push(item['tgl_lahir']);\n\n        if (item.data && item.data.nik) {\n          for (var _i2 in item.data) {\n            row.push(item.data[_i2]);\n          }\n        }\n\n        finalList.push(row);\n      });\n      console.log(finalList);\n      var finalVal = '';\n\n      for (var i = 0; i < finalList.length; i++) {\n        var value = finalList[i];\n\n        for (var j = 0; j < value.length; j++) {\n          var innerValue = value[j] === null ? '' : value[j].toString();\n          var result = innerValue.replace(/\"/g, '\"\"');\n          if (result.search(/(\"|,|\\n)/g) >= 0) result = '\"' + result + '\"';\n          if (j > 0) finalVal += ',';\n          finalVal += result;\n        }\n\n        finalVal += '\\n';\n      }\n\n      var pom = document.createElement('a');\n      var csvContent = finalVal; //here we load our csv data\n\n      var blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      var url = URL.createObjectURL(blob);\n      pom.href = url;\n      pom.setAttribute('download', \"Kelas_\".concat(data.kelas.nama_kelas.replace(/[\\W_]+/g, '_'), \".csv\"));\n      pom.click();\n    }\n  }, __jsx(UIImage, {\n    source: require(\"../../../imgs/share.png\"),\n    style: {\n      width: 12,\n      height: 12,\n      marginLeft: 8\n    }\n  }), \"Export CSV\"), __jsx(UIButton, {\n    size: \"small\",\n    style: {\n      margin: 0,\n      marginLeft: 8\n    },\n    labelStyle: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingTop: 2,\n      paddingBottom: 2,\n      paddingHorizontal: 0\n    },\n    onPress: function onPress() {\n      data.navigation.navigate('MuridDetail', {\n        item: {},\n        kelas: data.kelas\n      });\n    }\n  }, __jsx(UIImage, {\n    source: require(\"../../../imgs/plus.png\"),\n    style: {\n      width: 12,\n      height: 12,\n      marginLeft: 8\n    }\n  }), \"Tambah Siswa\"))), __jsx(UIList, {\n    data: data.list,\n    extraData: meta.checked.length,\n    loading: data.loading,\n    render: function render(list) {\n      var item = list.item;\n      return __jsx(View, {\n        style: {\n          flexDirection: 'row',\n          alignItems: 'center',\n          flex: 1\n        }\n      }, __jsx(TouchableOpacity, {\n        style: {\n          height: 60,\n          paddingLeft: 10,\n          paddingRight: 3,\n          borderBottomColor: '#ccc',\n          borderBottomWidth: 1,\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          var idx = meta.checked.indexOf(_parseInt(item.id));\n\n          if (idx >= 0) {\n            meta.checked.splice(idx, 1);\n          } else {\n            meta.checked.push(_parseInt(item.id));\n          }\n        }\n      }, __jsx(Text, {\n        style: {\n          fontSize: 20\n        }\n      }, meta.checked.indexOf(_parseInt(item.id)) >= 0 ? '☑' : '☐')), __jsx(UIListItem, {\n        style: {\n          height: 60,\n          flex: 1\n        },\n        onPress: function onPress() {\n          data.navigation.navigate('MuridDetail', {\n            item: item,\n            kelas: data.kelas\n          });\n        }\n      }, __jsx(View, {\n        style: {\n          flexDirection: 'row',\n          alignItems: 'center'\n        }\n      }, __jsx(Text, {\n        style: {\n          paddingRight: 10,\n          fontSize: 17,\n          fontWeight: 'bold'\n        }\n      }, list.index + 1), __jsx(View, null, __jsx(Text, {\n        style: {\n          fontSize: 16\n        }\n      }, item.nama_murid), __jsx(View, {\n        style: {\n          flexDirection: 'row',\n          alignItems: 'center'\n        }\n      }, __jsx(Text, {\n        style: {\n          fontSize: 13\n        }\n      }, item.is_active === 'y' ? 'Aktif' : 'Non-Aktif', \"\\xA0 \\u2022 \\xA0\"), __jsx(Text, {\n        style: {\n          fontSize: 13,\n          color: !item.data ? '#ccc' : 'green'\n        }\n      }, item.data ? \"Data diri tersedia\" : \"Tanpa data diri\")))), __jsx(View, null, __jsx(Text, {\n        style: {\n          fontSize: 12,\n          color: '#999',\n          textAlign: 'right'\n        }\n      }, \"NSA: \", item.nsa), __jsx(Text, {\n        style: {\n          fontSize: 12,\n          color: '#999',\n          textAlign: 'right'\n        }\n      }, \"NISN: \", item.nisn))));\n    }\n  }));\n});","map":null,"metadata":{},"sourceType":"module"}