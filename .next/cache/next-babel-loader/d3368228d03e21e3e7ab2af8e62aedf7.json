{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/riz/Documents/edumatis-web/pages/app/screens/admin/Kewajiban/KewajibanDetail.tsx\";\nvar __jsx = React.createElement;\nimport createRecord from \"../../../../../libs/queries/crud/createRecord\";\nimport deleteRecord from \"../../../../../libs/queries/crud/deleteRecord\";\nimport rawQuery from \"../../../../../libs/queries/crud/rawQuery\";\nimport updateRecord from \"../../../../../libs/queries/crud/updateRecord\";\nimport UIBody from \"../../../../../libs/ui/UIBody\";\nimport UIButton from \"../../../../../libs/ui/UIButton\";\nimport UICol from \"../../../../../libs/ui/UICol\";\nimport UIContainer from \"../../../../../libs/ui/UIContainer\";\nimport UIFieldSelectNative from \"../../../../../libs/ui/UIFieldSelectNative\";\nimport UIFieldText from \"../../../../../libs/ui/UIFieldText\";\nimport UIHead from \"../../../../../libs/ui/UIHead\";\nimport UIRow from \"../../../../../libs/ui/UIRow\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { Alert, Platform, Text, View, TouchableOpacity } from \"react-native-web\";\nimport KelasPicker from \"../Kelas/KelasPicker\";\nimport get from \"lodash.get\";\nexport default observer(function (_ref) {\n  var navigation = _ref.navigation;\n  var data = useObservable({\n    form: (navigation || {\n      getParam: function getParam() {\n        return {};\n      }\n    }).getParam(\"item\")\n  });\n  var count = get(data, \"form.transaksi_aggregate.aggregate.count\");\n  useEffect(function () {\n    if (data.form.id) {\n      rawQuery(\"\\n      {\\n        kewajiban(where: {id: {_eq: \".concat(data.form.id, \"}}) {\\n          kelas\\n          batas_pembayaran\\n          id\\n          nominal\\n          nama_kewajiban\\n          status\\n          tgl_batas_pembayaran_bulan\\n          tipe_pembayaran\\n          transaksi_aggregate {\\n            aggregate {\\n              count\\n            }\\n          }\\n        }\\n      }\\n    \")).then(function (res) {\n        data.form = res.kewajiban[0];\n      });\n    }\n  }, []);\n  return __jsx(UIContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, __jsx(UIHead, {\n    navigation: navigation,\n    title: \" Kewajiban \" + (data.form.id ? \"#\".concat(data.form.id, \": \").concat(data.form.nama_kewajiban) : \"Baru\"),\n    onBack: function onBack() {\n      navigation.goBack();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, __jsx(UIRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(UIButton, {\n    onPress:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!data.form.id) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return updateRecord(\"kewajiban\", data.form);\n\n            case 3:\n              _context.next = 7;\n              break;\n\n            case 5:\n              _context.next = 7;\n              return createRecord(\"kewajiban\", data.form);\n\n            case 7:\n              navigation.goBack();\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Simpan\"), count === 0 && __jsx(UIButton, {\n    style: {\n      backgroundColor: \"red\",\n      marginLeft: -5\n    },\n    onPress:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(Platform.OS === \"web\")) {\n                _context3.next = 8;\n                break;\n              }\n\n              if (!confirm(\"Apakah anda yakin ingin menghapus kewajiban ini ?\")) {\n                _context3.next = 6;\n                break;\n              }\n\n              if (!data.form.id) {\n                _context3.next = 5;\n                break;\n              }\n\n              _context3.next = 5;\n              return deleteRecord(\"kewajiban\", {\n                id: data.form.id\n              });\n\n            case 5:\n              navigation.goBack();\n\n            case 6:\n              _context3.next = 9;\n              break;\n\n            case 8:\n              Alert.alert(\"Menghapus Kewajiban\", \"Apakah Anda yakin ingin menghapus kewajiban ini ?\", [{\n                text: \"NO\",\n                style: \"cancel\",\n                onPress: function onPress() {}\n              }, {\n                text: \"YES\",\n                onPress: function () {\n                  var _onPress = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (!data.form.id) {\n                              _context2.next = 3;\n                              break;\n                            }\n\n                            _context2.next = 3;\n                            return deleteRecord(\"kewajiban\", {\n                              id: data.form.id\n                            });\n\n                          case 3:\n                            navigation.goBack();\n\n                          case 4:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  function onPress() {\n                    return _onPress.apply(this, arguments);\n                  }\n\n                  return onPress;\n                }()\n              }]);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Hapus\"))), __jsx(UIBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, __jsx(UIRow, {\n    style: {\n      paddingBottom: 25\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, count === 0 ? __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Transaksi untuk kewajiban ini masih kosong.\") : __jsx(TouchableOpacity, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, __jsx(UIRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \"Terdapat\"), __jsx(Text, {\n    style: {\n      marginHorizontal: 5,\n      textDecorationLine: \"underline\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, count, \" transaksi\"), __jsx(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \" untuk kewajiban ini.\")))), __jsx(UIFieldText, {\n    label: \"Nama Kewajiban\",\n    setValue: function setValue(value) {\n      data.form.nama_kewajiban = value;\n    },\n    value: data.form.nama_kewajiban,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }), __jsx(UIRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, __jsx(UICol, {\n    size: 4,\n    sizesm: 6,\n    sizexs: 6,\n    sizemd: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, __jsx(UIFieldText, {\n    label: \"Nominal\",\n    setValue: function setValue(value) {\n      data.form.nominal = value;\n    },\n    value: data.form.nominal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  })), __jsx(UICol, {\n    size: 4,\n    sizesm: 6,\n    sizexs: 6,\n    sizemd: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, __jsx(UIFieldSelectNative, {\n    label: \"Status Kewajiban\",\n    items: [\"aktif\", \"non-aktif\"],\n    setValue: function setValue(value) {\n      data.form.status = value;\n    },\n    value: data.form.status,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), __jsx(UICol, {\n    size: 4,\n    sizesm: 6,\n    sizexs: 6,\n    sizemd: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, __jsx(UIFieldSelectNative, {\n    label: \"Tipe Pembayaran\",\n    items: [\"Bulanan\", \"Insidentil\"],\n    setValue: function setValue(value) {\n      data.form.tipe_pembayaran = value;\n    },\n    value: data.form.tipe_pembayaran,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }))), __jsx(KelasPicker, {\n    form: data.form,\n    renderKelasTitle: function renderKelasTitle(kelas) {\n      return __jsx(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Rp \", _parseInt(kelas.nominal).toLocaleString(), \" \");\n    },\n    renderKelas: function renderKelas(kelas, k) {\n      return __jsx(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, __jsx(UIFieldText, {\n        label: \"Nominal untuk murid kelas \".concat(k.nama_kelas),\n        value: kelas.nominal,\n        setValue: function setValue(value) {\n          kelas.nominal = value;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }), __jsx(Text, {\n        style: {\n          padding: 10,\n          paddingLeft: 15,\n          color: \"#333\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Khusus untuk murid ini, di set sesuai nominal tertera:\"));\n    },\n    renderMurid: function renderMurid(murid, kelas) {\n      return __jsx(UICol, {\n        size: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, __jsx(UIFieldText, {\n        label: \"Nominal\",\n        value: murid.nominal || kelas.nominal,\n        setValue: function setValue(value) {\n          murid.nominal = value;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  })));\n});","map":{"version":3,"sources":["/Users/riz/Documents/edumatis-web/pages/app/screens/admin/Kewajiban/KewajibanDetail.tsx"],"names":["createRecord","deleteRecord","rawQuery","updateRecord","UIBody","UIButton","UICol","UIContainer","UIFieldSelectNative","UIFieldText","UIHead","UIRow","observer","useObservable","React","useEffect","Alert","Platform","Text","View","TouchableOpacity","KelasPicker","get","navigation","data","form","getParam","count","id","then","res","kewajiban","nama_kewajiban","goBack","backgroundColor","marginLeft","OS","confirm","alert","text","style","onPress","paddingBottom","marginHorizontal","textDecorationLine","value","nominal","status","tipe_pembayaran","kelas","toLocaleString","k","nama_kelas","padding","paddingLeft","color","murid"],"mappings":"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","sourcesContent":["import createRecord from \"@app/libs/queries/crud/createRecord\";\nimport deleteRecord from \"@app/libs/queries/crud/deleteRecord\";\nimport rawQuery from \"@app/libs/queries/crud/rawQuery\";\nimport updateRecord from \"@app/libs/queries/crud/updateRecord\";\nimport UIBody from \"@app/libs/ui/UIBody\";\nimport UIButton from \"@app/libs/ui/UIButton\";\nimport UICol from \"@app/libs/ui/UICol\";\nimport UIContainer from \"@app/libs/ui/UIContainer\";\nimport UIFieldSelectNative from \"@app/libs/ui/UIFieldSelectNative\";\nimport UIFieldText from \"@app/libs/ui/UIFieldText\";\nimport UIHead from \"@app/libs/ui/UIHead\";\nimport UIRow from \"@app/libs/ui/UIRow\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { Alert, Platform, Text, View, TouchableOpacity } from \"react-native\";\nimport KelasPicker from \"../Kelas/KelasPicker\";\nimport get from \"lodash.get\";\n\nexport default observer(({ navigation }: any) => {\n  const data = useObservable({\n    form: (navigation || { getParam: () => ({})}).getParam(\"item\")\n  });\n  const count = get(data, \"form.transaksi_aggregate.aggregate.count\");\n  useEffect(() => {\n    if (data.form.id) {\n      rawQuery(`\n      {\n        kewajiban(where: {id: {_eq: ${data.form.id}}}) {\n          kelas\n          batas_pembayaran\n          id\n          nominal\n          nama_kewajiban\n          status\n          tgl_batas_pembayaran_bulan\n          tipe_pembayaran\n          transaksi_aggregate {\n            aggregate {\n              count\n            }\n          }\n        }\n      }\n    `).then((res: any) => {\n        data.form = res.kewajiban[0];\n      });\n    }\n  }, []);\n\n  return (\n    <UIContainer>\n      <UIHead\n        navigation={navigation}\n        title={\n          ` Kewajiban ` +\n          (data.form.id\n            ? `#${data.form.id}: ${data.form.nama_kewajiban}`\n            : `Baru`)\n        }\n        onBack={() => {\n          navigation.goBack();\n        }}\n      >\n        <UIRow>\n          <UIButton\n            onPress={async () => {\n              if (data.form.id) {\n                await updateRecord(\"kewajiban\", data.form);\n              } else {\n                await createRecord(\"kewajiban\", data.form);\n              }\n              navigation.goBack();\n            }}\n          >\n            Simpan\n          </UIButton>\n          {count === 0 && (\n            <UIButton\n              style={{\n                backgroundColor: \"red\",\n                marginLeft: -5\n              }}\n              onPress={async () => {\n                if (Platform.OS === \"web\") {\n                  if (\n                    confirm(\"Apakah anda yakin ingin menghapus kewajiban ini ?\")\n                  ) {\n                    if (data.form.id) {\n                      await deleteRecord(\"kewajiban\", { id: data.form.id });\n                    }\n                    navigation.goBack();\n                  }\n                } else {\n                  Alert.alert(\n                    \"Menghapus Kewajiban\",\n                    \"Apakah Anda yakin ingin menghapus kewajiban ini ?\",\n                    [\n                      {\n                        text: \"NO\",\n                        style: \"cancel\",\n                        onPress: () => {}\n                      },\n                      {\n                        text: \"YES\",\n                        onPress: async () => {\n                          if (data.form.id) {\n                            await deleteRecord(\"kewajiban\", {\n                              id: data.form.id\n                            });\n                          }\n                          navigation.goBack();\n                        }\n                      }\n                    ]\n                  );\n                }\n              }}\n            >\n              Hapus\n            </UIButton>\n          )}\n        </UIRow>\n      </UIHead>\n      <UIBody>\n        <UIRow style={{ paddingBottom: 25 }}>\n          {count === 0 ? (\n            <Text>Transaksi untuk kewajiban ini masih kosong.</Text>\n          ) : (\n            <TouchableOpacity>\n              <UIRow>\n                <Text>Terdapat</Text>\n                <Text\n                  style={{\n                    marginHorizontal: 5,\n                    textDecorationLine: \"underline\"\n                  }}\n                >\n                  {count} transaksi\n                </Text>\n                <Text> untuk kewajiban ini.</Text>\n              </UIRow>\n            </TouchableOpacity>\n          )}\n        </UIRow>\n        <UIFieldText\n          label=\"Nama Kewajiban\"\n          setValue={(value: any) => {\n            data.form.nama_kewajiban = value;\n          }}\n          value={data.form.nama_kewajiban}\n        />\n        <UIRow>\n          <UICol size={4} sizesm={6} sizexs={6} sizemd={6}>\n            <UIFieldText\n              label=\"Nominal\"\n              setValue={(value: any) => {\n                data.form.nominal = value;\n              }}\n              value={data.form.nominal}\n            />\n          </UICol>\n          <UICol size={4} sizesm={6} sizexs={6} sizemd={6}>\n            <UIFieldSelectNative\n              label=\"Status Kewajiban\"\n              items={[\"aktif\", \"non-aktif\"]}\n              setValue={(value: any) => {\n                data.form.status = value;\n              }}\n              value={data.form.status}\n            />\n          </UICol>\n          <UICol size={4} sizesm={6} sizexs={6} sizemd={6}>\n            <UIFieldSelectNative\n              label=\"Tipe Pembayaran\"\n              items={[\"Bulanan\", \"Insidentil\"]}\n              setValue={(value: any) => {\n                data.form.tipe_pembayaran = value;\n              }}\n              value={data.form.tipe_pembayaran}\n            />\n          </UICol>\n        </UIRow>\n        <KelasPicker\n          form={data.form}\n          renderKelasTitle={(kelas: any) => (\n            <Text>Rp {parseInt(kelas.nominal).toLocaleString()} </Text>\n          )}\n          renderKelas={(kelas: any, k: any) => {\n            return (\n              <View>\n                <UIFieldText\n                  label={`Nominal untuk murid kelas ${k.nama_kelas}`}\n                  value={kelas.nominal}\n                  setValue={(value: any) => {\n                    kelas.nominal = value;\n                  }}\n                />\n                <Text style={{ padding: 10, paddingLeft: 15, color: \"#333\" }}>\n                  Khusus untuk murid ini, di set sesuai nominal tertera:\n                </Text>\n              </View>\n            );\n          }}\n          renderMurid={(murid: any, kelas: any) => {\n            return (\n              <UICol size={6}>\n                <UIFieldText\n                  label=\"Nominal\"\n                  value={murid.nominal || kelas.nominal}\n                  setValue={(value: any) => {\n                    murid.nominal = value;\n                  }}\n                />\n              </UICol>\n            );\n          }}\n        />\n      </UIBody>\n    </UIContainer>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}